import { motion } from 'motion/react'

type Props = {
    onAnimationComplete?: () => void
    speed?: number
}

function KoreanHelloAnimation({ onAnimationComplete, speed = 1 }: Props) {
    const calc = (x: number) => x * speed

    // Path data extracted from korean.svg - each path represents a stroke of "안녕하세요"
    const paths = [
        "M357.039 453.428C356.791 465.09 353.813 473.775 340.165 478.738C323.54 484.693 305.425 496.361 303.193 520.425C300.711 546.232 317.337 567.82 343.391 568.316C368.453 568.564 388.801 552.932 388.304 523.155C387.808 495.363 369.198 480.971 344.88 477.745",
        "M466.22 435.562C463.491 477.249 457.535 529.606 449.347 587.175C445.625 615.959 437.684 623.155 428.999 623.155C420.066 623.155 416.344 612.237 418.577 597.596C421.307 580.227 428.503 566.827 438.925 553.428C451.828 537.051 471.431 521.418 495.501 516.951",
        "M364.483 610.003C361.754 621.17 360.761 637.051 362.498 649.954C365.227 669.309 378.627 679.731 404.93 679.979C425.277 680.227 442.151 677.249 451.332 674.52",
        "M562.994 469.309C558.032 489.904 555.302 510.996 555.55 528.614C555.798 553.924 571.431 566.827 592.771 567.324C611.63 567.572 628.503 563.353 637.932 557.646",
        "M639.917 483.204C664.483 484.197 683.341 483.453 698.478 481.467",
        "M635.947 515.959C655.302 516.207 678.13 515.711 694.508 513.974",
        "M703.193 435.562C700.215 477.249 695.004 521.914 690.289 552.932C686.071 581.219 681.108 595.115 661.009 599.83C641.654 604.296 625.029 617.944 622.547 639.284C619.818 663.353 635.699 682.708 660.513 682.708C684.086 682.708 703.193 668.316 702.944 642.013C702.448 616.455 684.83 601.815 663.242 599.582",
        "M792.522 448.961C809.644 447.472 823.788 447.472 844.135 449.954",
        "M776.394 482.956C796.493 480.475 816.344 479.979 838.429 481.716C859.52 482.956 870.439 490.649 868.702 501.07C866.965 511.989 849.843 516.455 819.818 518.192C787.808 519.929 773.913 537.299 772.424 560.128C770.935 581.219 785.079 602.063 810.637 603.552C836.195 604.793 853.317 584.693 854.806 563.85C856.543 538.788 843.143 521.666 819.57 518.44",
        "M931.232 435.562C927.758 485.934 920.314 538.043 910.885 612.733C905.178 658.639 897.982 678.49 887.312 678.49C878.875 678.49 874.657 670.55 876.89 651.939C879.371 631.095 886.071 613.478 898.478 593.626C913.614 569.309 932.473 553.18 962.001 544.743",
        "M1078.88 445.487C1066.47 496.108 1055.8 532.584 1040.41 566.579C1031.23 586.927 1021.31 592.634 1012.62 590.401C1003.94 587.919 1002.94 576.505 1009.4 561.616C1019.07 540.525 1037.93 520.674 1058.78 521.17C1078.88 521.418 1093.27 544.991 1100.71 588.415",
        "M1100.71 588.415C1104.68 546.976 1117.09 521.666 1139.42 524.147C1162.75 526.629 1169.45 554.172 1152.32 628.366",
        "M1211.63 435.562C1208.65 516.207 1199.97 593.13 1183.09 673.527",
        "M1345.62 434.321C1346.12 446.728 1343.64 455.165 1329.5 459.383C1310.64 465.09 1293.27 478.242 1291.03 502.807C1288.8 528.614 1305.43 549.954 1332.97 550.202C1359.02 550.45 1379.37 532.832 1378.87 505.289C1378.38 477.745 1359.77 461.616 1334.21 458.887",
        "M1315.6 581.964C1318.08 593.875 1318.14 616.786 1317.4 625.223",
        "M1357.04 582.708C1355.55 636.058 1315.1 652.187 1279.37 654.42C1257.78 655.909 1248.35 651.195 1249.35 642.262C1250.09 633.825 1263.74 625.14 1311.38 625.14C1342.4 625.14 1379.62 631.84 1425.28 647.969",
    ]

    return (
        <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            transition={{ duration: 0.3 }}
            style={{
                display: 'flex',
                justifyContent: 'center',
                alignItems: 'center',
            }}
        >
            <motion.svg
                viewBox="250 380 1230 350"
                fill="none"
                stroke="currentColor"
                strokeWidth="14.8883"
                strokeLinecap="round"
                initial={{ opacity: 1 }}
                exit={{ opacity: 0 }}
                transition={{ duration: 0.5 }}
                style={{
                    height: '10rem',
                    width: 'auto',
                    color: '#ffffff',
                }}
            >
                <title>안녕하세요</title>
                {paths.map((d, index) => (
                    <motion.path
                        key={index}
                        d={d}
                        initial={{ pathLength: 0, opacity: 0 }}
                        animate={{ pathLength: 1, opacity: 1 }}
                        transition={{
                            pathLength: {
                                duration: calc(0.3),
                                delay: calc(index * 0.12),
                                ease: "easeInOut",
                            },
                            opacity: {
                                duration: calc(0.1),
                                delay: calc(index * 0.12),
                            },
                        }}
                        onAnimationComplete={index === paths.length - 1 ? onAnimationComplete : undefined}
                    />
                ))}
            </motion.svg>
        </motion.div>
    )
}

export { KoreanHelloAnimation }
